var isAndroid="android"===Ti.Platform.osname?!0:!1,Widget=function(_args){var self=Ti.UI.createView({width:"90%",height:72,windowSoftInputMode:isAndroid?Ti.UI.Android.SOFT_INPUT_STATE_HIDDEN:void 0});self.add(Ti.UI.createLabel({height:28,top:23,touchEnabled:!1,font:{fontSize:16},opacity:.7,left:10,zIndex:isAndroid?void 0:99})),self.add(Ti.UI.createTextField({width:"99%",height:isAndroid?37:28,borderStyle:isAndroid?void 0:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,top:23,backgroundColor:"transparent",font:{fontSize:16},color:"#444"})),self.add(Ti.UI.createView({width:"100%",height:isAndroid?2:0,bottom:15}));var args=arguments[0]||{},_config={color:{pattern:"#aaa",post:"#208FE5",exceedingColor:"FF0000"},duration:200,editable:!0,exceeding:!1},_events={CLICK:"click",FOCUS:"focus",BLUR:"blur",CHANGE:"change"},_animation={ANIMATION_UP:function(){if(_config.editable){var e=self.children[0].getText().length,t=_config.exceeding?_config.color.exceeding:_config.color.post;e+=e*(Number(e)>25?.2:.1),self.children[0].animate({top:0,color:t,transform:Ti.UI.create2DMatrix().scale(.7),left:isAndroid?-e+2:-e,duration:_config.duration}),self.children[2].animate({backgroundColor:t})}},ANIMATION_DOWN:function(){if(_config.editable){var e=self.children[0].getText().length,t=_config.exceeding?_config.color.exceeding:_config.color.pattern;e+=e*(Number(e)>25?.2:.1),self.children[2].animate({backgroundColor:t});var i={top:self.children[1].top,color:t,transform:Ti.UI.create2DMatrix().scale(1),left:isAndroid?0:10,duration:_config.duration};self.children[1].getValue()&&(i.top=0,i.transform=Ti.UI.create2DMatrix().scale(.7),i.left=-e),self.children[0].animate(i)}}};return self.children[1].addEventListener(_events.FOCUS,_animation.ANIMATION_UP),self.children[1].addEventListener(_events.BLUR,_animation.ANIMATION_DOWN),function(){_config.color.post=args.colorFocus||_config.color.post,_config.color.pattern=args.colorPattern||_config.color.pattern,_config.color.exceeding=args.exceedingColor||"#FF0000",_config.duration=args.animationDuration||_config.duration;var _init={titleHint:args.titleHint,width:args.width,top:args.top,left:args.left,right:args.right,bottom:args.bottom,colorFont:args.colorFont,keyboardType:args.keyboardType,returnKey:args.returnKey,password:args.password,editable:args.editable,maxLength:args.maxLength,minLength:args.minLength};if("string"==typeof _init.editable&&(_init.editable=eval(_init.editable)),_init.titleHint||self.children[0].setVisible(!1),_init.width&&self.setWidth(_init.width),_init.top&&self.setTop(_init.top),_init.bottom&&self.setBottom(_init.bottom),_init.left&&self.setLeft(_init.left),_init.right&&self.setRight(_init.right),_init.colorFont&&self.children[1].setColor(_init.colorFont),_init.keyboardType&&self.children[1].setKeyboardType(_init.keyboardType),_init.returnKey&&self.children[1].setReturnKeyType(_init.returnKey),_init.password&&self.children[1].setPasswordMask(_init.password),self.children[0].setText(_init.titleHint),self.children[0].setColor(_config.color.pattern),self.children[2].setBackgroundColor(_config.color.pattern),0==_init.editable&&(self.setOpacity(.3),self.children[1].setEditable(!1),_config.editable=!1),_init.maxLength>0){var counter=Ti.UI.createLabel({height:15,width:64,font:{fontSize:11},opacity:.7,right:-64,textAlign:"right",bottom:0});self.add(counter),self.children[1].addEventListener(_events.CHANGE,function(){var e=self.children[1].getValue().length;return 0==e?void counter.animate({right:-64,duration:350}):(e>=1&&counter.animate({right:0,duration:350}),e<_init.minLength||e>_init.maxLength?(_config.exceeding=!0,self.children[2].backgroundColor=_config.color.exceeding,counter.color=_config.color.exceeding,self.children[0].color=_config.color.exceeding):self.children[2].backgroundColor!=_config.color.post&&(_config.exceeding=!1,self.children[2].backgroundColor=_config.color.post,counter.color="#000",self.children[0].color=_config.color.post),void counter.setText(e+" / "+_init.maxLength))})}}(),self.getValue=function(){return self.children[1].getValue()},self.ANIMATION_UP=function(){_animation.ANIMATION_UP()},self.ANIMATION_DOWN=function(){_animation.ANIMATION_DOWN()},self.setValue=function(e,t){t&&_animation.ANIMATION_UP(),self.children[1].setValue(e),self.children[1].fireEvent(_events.CHANGE,{})},self.addEventListener=function(e,t){self.children[1].addEventListener(e,function(e){t(e)})},self.removeEventListener=function(e,t){self.children[1].removeEventListener(e,function(e){t(e)})},self.blur=function(){self.children[1].blur()},self.focus=function(){self.children[1].focus()},self};exports.createView=function(e){return new Widget(e)};